<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="description" content="Geolocation API">
  <title>Geo Location</title>
  <meta name="viewport" content="initial-scale=1.0">

  <!-- LINK STYLESHEETS -->
  <link rel="stylesheet" href="../../assets-shared/css/fonts.css">
  <link rel="stylesheet" href="../../assets-shared/css/buttons.css">
  <link rel="stylesheet" href="../../assets-shared/css/basics.css">
</head>

<body>
  <!-- TODO HERE -->
  <div id="map"></div>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSjbe9_hIWU4o7N2RevIQu1zdH48BJL70&callback=initMap"
  async defer></script>

  <!-- BACK BUTTON -->
  <h1 class="center top-position">Get Geolocation From Browser</h1>
  <div class="flex justify-center bottom-position">
    <a id="bttn-back" class="center block bttn bttn-round">BACK<a>
  </div>

  <!-- LOAD JAVASCRIPS AFTER PAGELOAD -->
  <script src="../../assets-shared/js/buttons.js"></script>
</body>
</html>



<!-- INLINE STYLE -->
<style>
  #map {
    height: 100vh;
    width: 100vw;
    position: relative;
  }
  .top-position {
    cursor: pointer;
    position: absolute;
    top: 0px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(106,90,205,0.5); /*rgba(0,0,0,0.89);//*/
    font-size: 24px;
    color: white;
    padding: 10px 20px;
    border-radius: 30px;
  }
  .bottom-position {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
  }
</style>



<!-- INLINE SCRIPT -->
<script>
  function initMap() {
    console.log("HI");
    navigator.geolocation.getCurrentPosition((data) => {
      loc = {
        lat: data.coords.latitude,
        lng: data.coords.longitude
      };
      alert(`${loc.lat} ${loc.lng}`);
      // create ,ng lat bound
      map = new google.maps.Map(document.getElementById('map'), {
        disableDefaultUI: true,
        gestureHandling: 'greedy', // scrol lock disabled. Alternative options: none / cooperative
        center: {lat: loc.lat, lng: loc.lng},
        zoom: 15
      });
      // create marker

      new google.maps.Marker({
        position: new google.maps.LatLng(loc.lat, loc.lng),
        map: map,
        animation: google.maps.Animation.DROP
      });
    });
  };

  var map;
  let loc = {};

  const refresh = document.querySelector('.top-position').addEventListener("click", () => {
    window.location.reload(true);
  });

  // const nathanielCode = () => {
  //   navigator.geolocation.getCurrentPosition((data) => {
  //     console.log(data);
  //     const latitudeGeo = data.coords.latitude;
  //     const longitudeGeo = data.coords.longitude;
  //     // const message = `<p>latitude :${latitudeGeo} , longitude : ${longitudeGeo}</p>`;
  //     // geo.insertAdjacentHTML('afterbegin', message);
  //     Weather(latitudeGeo, longitudeGeo);
  //   });
  // };
</script>
